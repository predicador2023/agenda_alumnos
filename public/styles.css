/* =========================================================
   Agenda de Alumnos — styles.css (versión extendida y completa)
   Minimalista, mobile-first, accesible y responsivo
   ========================================================= */

/* ------------------------
   0) Reset y normalización
   ------------------------ */
*, *::before, *::after { box-sizing: border-box; }

html {
  font-size: 16px;
  -webkit-text-size-adjust: 100%;
}

body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell,
               "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  line-height: 1.5;
  color: #222;
  background: #f5f6f7;
}

img, svg { display: block; max-width: 100%; }
button, input, select, textarea { font: inherit; color: inherit; }
table { border-collapse: collapse; border-spacing: 0; }
ul, ol { padding-left: 1.25rem; }

/* ------------------------
   1) Variables de tema
   ------------------------ */
:root {
  --bg: #f5f6f7;
  --surface: #ffffff;
  --surface-2: #fafafa;
  --text: #222222;
  --muted: #666666;
  --border: #dcdfe3;

  --primary: #2f8fdb;   /* editar, acciones secundarias */
  --success: #2ecc71;   /* confirmar, guardar */
  --danger: #e74c3c;    /* eliminar */
  --warning: #f39c12;   /* avisos */
  --info: #6c8cd5;      /* informativo */

  --radius-xl: 14px;
  --radius: 10px;
  --radius-sm: 6px;

  --shadow-1: 0 1px 2px rgba(0,0,0,.06);
  --shadow-2: 0 6px 16px rgba(0,0,0,.08);

  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 28px;

  --font-1: 12px;   /* xs */
  --font-2: 13px;   /* sm */
  --font-3: 14px;   /* md compact */
  --font-4: 16px;   /* base */
  --font-5: 18px;   /* lg */
  --font-6: 22px;   /* xl title */
  --font-7: 28px;   /* 2xl header */
}

/* ------------------------
   2) Utilidades globales
   ------------------------ */
.hidden { display: none !important; }

.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0,0,0,0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.container {
  max-width: 960px;
  margin: 0 auto;
  padding: var(--space-4);
}

.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: var(--space-4);
  box-shadow: var(--shadow-1);
}

/* ------------------------
   3) Tipografía y enlaces
   ------------------------ */
h1, h2, h3, h4 {
  color: #111;
  margin: 0 0 var(--space-3) 0;
  line-height: 1.25;
}

p { margin: 0 0 var(--space-3) 0; color: var(--text); }

a {
  color: #0366d6;
  text-decoration: none;
}
a:hover { text-decoration: underline; }

/* ------------------------
   4) Header con imagen y overlay
   ------------------------ */
header {
  position: relative;
  background: url('img/estudiantes_header.png') no-repeat center center;
  background-size: cover;
  height: 140px; /* compacto */
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  overflow: hidden;
}

header::before {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.40); /* overlay oscuro para contraste */
  z-index: 1;
}

header .header-gradient::before {
  /* opcional: gradiente inferior para reforzar lectura del título */
  content: "";
  position: absolute;
  left: 0; right: 0; bottom: 0;
  height: 40%;
  background: linear-gradient(to top, rgba(0,0,0,.35), rgba(0,0,0,0));
  z-index: 1;
}

header h1 {
  position: relative;
  z-index: 2;
  font-size: var(--font-7);
  font-weight: 800;
  color: #fff;
  letter-spacing: 0.2px;
  text-shadow: 0 2px 4px rgba(0,0,0,0.6);
  margin: 0;
}

/* Variante clara del overlay (por si la imagen es muy oscura) */
.header--overlay-light::before { background: rgba(255,255,255,0.35); }
.header--overlay-light h1 {
  color: #0f1214;
  text-shadow: 0 1px 2px rgba(255,255,255,0.3);
}

/* ------------------------
   5) Layout principal y secciones
   ------------------------ */
main { max-width: 960px; margin: 0 auto; padding: var(--space-4); }

section {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: var(--space-4);
  margin: var(--space-4) 0;
  box-shadow: var(--shadow-1);
}

section > h2 {
  font-size: var(--font-5);
  font-weight: 700;
  margin-bottom: var(--space-3);
}

/* ------------------------
   6) Botones y grupos
   ------------------------ */
button {
  appearance: none;
  border: 1px solid var(--border);
  background: #f9f9f9;
  color: var(--text);
  font-size: var(--font-3);
  font-weight: 600;
  padding: 10px 14px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background 140ms ease, border-color 140ms ease, box-shadow 140ms ease, transform 120ms ease;
}
button:hover {
  background: #eee;
  border-color: #cfd3d9;
}
button:active { transform: translateY(1px); }
button:focus-visible {
  outline: 2px solid #7aa7ff;
  outline-offset: 2px;
}

.btn-primary {
  background: var(--success);
  border-color: #29b765;
  color: #fff;
}
.btn-primary:hover { background: #28b463; }

.btn-outline {
  background: #fff;
  color: var(--text);
}

.btn-danger {
  background: var(--danger);
  border-color: #c0392b;
  color: #fff;
}
.btn-danger:hover { background: #c0392b; }

.btn-info {
  background: var(--info);
  border-color: #5a79c0;
  color: #fff;
}
.btn-info:hover { background: #5a79c0; }

.grupo-botones {
  display: flex;
  flex-direction: column; /* mobile-first, apilados */
  gap: var(--space-2);
  margin: var(--space-3) 0;
}
.grupo-botones button { width: 100%; }

/* Botón "Ingresar" y "Ver Lista" con sutiles acentos */
#btn-ingresar:hover {
  background: #f2fbf6;
  border-color: #bfe8cc;
}
#btn-ver-lista:hover {
  background: #f3f8ff;
  border-color: #cfe0f7;
}

/* Botones de resumen compactos */
.grupo-resumen {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-2);
  margin: var(--space-3) 0 var(--space-2);
}
.grupo-resumen button {
  font-size: var(--font-2);
  padding: 8px 10px;
}

/* ------------------------
   7) Formulario
   ------------------------ */
#form-section {
  background: var(--surface-2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: var(--space-3);
  margin-top: var(--space-2);
}

#form-section h2 {
  font-size: var(--font-4);
  text-align: center;
  margin-bottom: var(--space-3);
  color: #111;
}

form {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-2);
}

label {
  display: grid;
  gap: var(--space-1);
  font-size: var(--font-3);
  color: var(--muted);
}

input[type="text"],
input[type="number"],
input[type="date"],
select {
  width: 100%;
  padding: 10px;
  font-size: var(--font-3);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: #fff;
  color: var(--text);
  transition: border-color 140ms ease, box-shadow 140ms ease, background 140ms ease;
}

input:hover,
select:hover { background: #fcfcfc; }

input:focus-visible,
select:focus-visible {
  outline: none;
  border-color: #7aa7ff;
  box-shadow: 0 0 0 3px rgba(122,167,255,.25);
}

/* Botón guardar dentro del form */
#form-section button[type="submit"] {
  width: 100%;
  margin-top: var(--space-2);
  background: var(--success);
  border: 1px solid #29b765;
  color: #fff;
  font-size: var(--font-3);
  padding: 10px 12px;
}
#form-section button[type="submit"]:hover { background: #28b463; }

/* ------------------------
   8) Tabla de ingresos
   ------------------------ */
.table-scroll {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

table {
  width: 100%;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: #fff;
  overflow: hidden;
}

thead { background: #f1f3f5; }

th, td {
  border-bottom: 1px solid var(--border);
  padding: 10px;
  text-align: left;
  font-size: var(--font-3);
  color: var(--text);
}
th {
  font-weight: 700;
  color: #111;
}
tbody tr:last-child td { border-bottom: none; }

td .editar,
td .eliminar {
  display: inline-block;
  margin-right: var(--space-1);
}

button.editar,
button.eliminar {
  border: none;
  color: #fff;
  padding: 6px 10px;
  font-size: var(--font-2);
  border-radius: var(--radius-sm);
}
button.editar { background: var(--primary); }
button.editar:hover { background: #1f79c1; }
button.eliminar { background: var(--danger); }
button.eliminar:hover { background: #c0392b; }

/* Monto positivo en verde */
.monto-positivo {
  color: #1a7f3b;
  font-weight: 700;
}

/* ------------------------
   9) Resumen de ingresos
   ------------------------ */
#resumen-ingresos { background: var(--surface); }

#resultado-resumen {
  font-size: var(--font-4);
  font-weight: 700;
  text-align: center;
  margin: var(--space-2) 0;
  color: #111;
}

#tabla-meses-anteriores {
  width: 100%;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
}
#tabla-meses-anteriores thead { background: #f1f3f5; }
#tabla-meses-anteriores th,
#tabla-meses-anteriores td {
  border-bottom: 1px solid var(--border);
  text-align: center;
  font-size: var(--font-3);
  padding: 10px;
}

/* ------------------------
   10) Estados y feedback
   ------------------------ */
.is-success { background: #eafaf1; border-color: #c8efd6; }
.is-warning { background: #fff6e6; border-color: #ffe1a3; }
.is-error   { background: #fdecea; border-color: #f5c6c0; }

.badge {
  display: inline-block;
  padding: 3px 8px;
  font-size: var(--font-2);
  border-radius: 999px;
  background: #eef2f7;
  color: #3c4858;
  border: 1px solid var(--border);
}

/* ------------------------
   11) Mensaje de confirmación + accesibilidad y motion
   ------------------------ */
.mensaje-confirmacion {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: linear-gradient(135deg, #4caf50, #2e7d32);
  color: #fff;
  padding: 12px 20px;
  border-radius: 8px;
  font-weight: bold;
  font-size: 14px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.25);
  display: flex;
  align-items: center;
  gap: 8px;
  animation: aparecer 0.3s ease-out;
  z-index: 9999; /* asegura que quede arriba de todo */
}

.icono-check {
  display: inline-block;
  font-size: 18px;
  transform: scale(0);
  animation: expandirRebote 0.6s ease-out forwards;
}

@keyframes aparecer {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes expandirRebote {
  0%   { transform: scale(0); }
  70%  { transform: scale(1.5); }
  90%  { transform: scale(0.9); }
  100% { transform: scale(1.2); }
}

@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ------------------------
   12) Dark mode automático
   ------------------------ */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0f1113;
    --surface: #15181b;
    --surface-2: #161a1e;
    --text: #eaeef2;
    --muted: #b5bcc5;
    --border: #2a2f35;
    --shadow-1: 0 1px 2px rgba(0,0,0,.35);
    --shadow-2: 0 6px 16px rgba(0,0,0,.25);
  }

  body { background: var(--bg); color: var(--text); }
  header { color: var(--text); }
  header::before { background: rgba(0,0,0,0.45); }

  section {
    background: var(--surface);
    border-color: var(--border);
    box-shadow: var(--shadow-1);
  }

  button {
    background: #1b1f24;
    color: var(--text);
    border-color: var(--border);
  }
  button:hover { background: #20252b; }

  input, select {
    background: #1b1f24;
    color: var(--text);
    border-color: var(--border);
  }

  table {
    background: #1b1f24;
    border-color: var(--border);
  }
  thead { background: #1e2329; }
  th, td { border-bottom-color: var(--border); }

  #resultado-resumen { color: var(--text); }
}

/* ------------------------
   13) Media queries (responsivo)
   ------------------------ */
/* <= 1024px: pequeños ajustes en espaciados */
/* =========================================================
   1. ESTILOS BASE (PC y General)
   ========================================================= */
.btn-editar, .eliminar {
    width: 32px;  /* Tamaño base cómodo para PC */
    height: 32px;
    display: inline-flex !important; 
    align-items: center !important;  
    justify-content: center !important; 
    line-height: 1 !important;       
    text-align: center;
    padding: 0 !important;           
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid;
    margin: 2px;
}

/* Colores Pastel Minimalistas */
.btn-editar {
    background-color: #fff9db;
    color: #e2aa00;
    border-color: #ffeeba;
}

.eliminar {
    background-color: #fff5f5;
    color: #721c24;
    border-color: #f5c6cb;
}

/* Contenedor de los botones en la celda */
td:last-child {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 4px;
}

/* =========================================================
   2. MEDIA QUERIES (Ajuste descendente)
   ========================================================= */

@media (max-width: 768px) {
  th, td {
    padding: 6px 4px;
    font-size: 0.9rem;
  }
}

@media (max-width: 600px) {
  .btn-editar, .eliminar {
    width: 28px;
    height: 28px;
    font-size: 0.8rem;
  }
}

@media (max-width: 400px) {
  header h1 { font-size: 1.2rem; }
  
  th, td {
    font-size: 0.8rem;
    padding: 4px 2px;
  }
  
  table {
    display: table; 
    width: 100%;
  }
}

/* LA SOLUCIÓN FINAL PARA 330px - Modo Columna */
@media (max-width: 330px) {
  main, section {
    padding: 5px 2px !important;
  }

  /* BOTONES EN COLUMNA: Ahorro de espacio lateral */
  td:last-child {
    display: flex !important;
    flex-direction: column !important; 
    gap: 3px !important;
    width: 35px !important; 
    min-width: 35px !important;
    padding: 2px !important;
  }

  .btn-editar, .eliminar {
    width: 24px !important;
    height: 24px !important;
    font-size: 0.75rem !important;
    margin: 0 !important;
  }

  th, td {
    font-size: 10px !important;
    padding: 4px 1px !important;
    word-break: break-word; 
  }

  /* Distribución de anchos sin desplazamiento horizontal */
  th:nth-child(1), td:nth-child(1) { width: 35%; } 
  th:nth-child(2), td:nth-child(2) { width: 20%; } 
  th:nth-child(3), td:nth-child(3) { width: 20%; } 
  th:nth-child(4), td:nth-child(4) { width: 15%; } 
  th:nth-child(5), td:nth-child(5) { width: 10%; } 
}
/* =========================================================
   RETOQUES PARA EL SELECTOR ESTRELLA (DENTRO DEL ENTORNO)
   ========================================================= */

/* Contenedor de la cabecera en la lista */
.cabecera-filtros {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--surface-2);
}

/* Estilo del selector dinámico */
#filtro-mes-dinamico {
    padding: 8px 12px;
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
    background-color: var(--surface);
    color: var(--text);
    font-size: var(--font-3);
    font-weight: 600;
    cursor: pointer;
    box-shadow: var(--shadow-1);
    outline: none;
    min-width: 150px;
}

#filtro-mes-dinamico:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(47, 143, 219, 0.2);
}

/* El cartel de "Sin datos" */
#mensaje-vacio {
    background: var(--surface-2);
    border: 1px dashed var(--border);
    border-radius: var(--radius);
    margin-top: 20px;
}

/* =========================================================
   AJUSTES RESPONSIVE (MEDIA QUERIES)
   ========================================================= */

/* Celulares medianos */
@media (max-width: 600px) {
    .cabecera-filtros {
        flex-direction: column; /* Apilamos título y selector */
        align-items: flex-start;
        gap: 10px;
    }
    
    #filtro-mes-dinamico {
        width: 100%; /* El selector ocupa todo el ancho para tocar fácil */
        padding: 12px;
    }
}

/* Celulares ultra-pequeños (330px - El modo columna que ya tenías) */
@media (max-width: 330px) {
    .cabecera-filtros h2 {
        font-size: var(--font-4) !important;
        margin: 0;
    }

    #filtro-mes-dinamico {
        font-size: 11px !important;
        padding: 6px;
    }
}